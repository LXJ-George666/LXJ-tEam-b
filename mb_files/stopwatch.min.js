var splittime,t=[0,0,0,0,0,0,0,1,1],firstsplitflag=0,btn_action=$("#btn-action"),split_result=$("#split-result");function action_watch(){if(t[t[2]]=(new Date).valueOf(),t[2]=1-t[2],0==t[2]){clearInterval(t[4]),t[3]+=t[1]-t[0],btn_action.html("开始");var a='<li class="green"><span class="fl"><i class="icon-stop-circle-o"></i>记录'+t[7]+++'</span><span class="fr">'+format_watch(t[1]-t[0])+"</span></li>";split_result.append(a),t[4]=t[1]=t[0]=0,display_watch(),firstsplitflag=0,reset_time()}else btn_action.html("停止"),t[4]=setInterval(display_watch,43);1==t[7]&&1==t[8]||split_result.show()}function split_watch(){if(0!==t[2]){var a='<li class="yellow"><span class="fl"><i class="icon-clock"></i>计次'+t[8]+++'</span><span class="fr">'+format_watch(t[1]-t[0])+"</span></li>";split_result.append(a)}1==t[7]&&1==t[8]||split_result.show()}function reset_time(){t[2]&&(t[1]=(new Date).valueOf()),t[4]=t[3]=t[2]=t[1]=t[0]=0}function reset_watch(){t[2]&&action_watch(),t[4]=t[3]=t[2]=t[1]=t[0]=0,display_watch(),split_result.html(""),t[7]=1,t[8]=1,split_result.hide()}function display_watch(){t[2]&&(t[1]=(new Date).valueOf()),t[6].val(format_watch(t[3]+t[1]-t[0]))}function format_watch(a){for(var l=new Date(a+t[5]).toString().replace(/.*([0-9][0-9]:[0-9][0-9]:[0-9][0-9]).*/,"$1"),c=String(a%1e3);c.length<3;)c="0"+c;return l+="."+c}function load_watch(){t[5]=new Date(1970,1,1,0,0,0,0).valueOf(),t[6]=$("#stopwatch-display"),display_watch()}btn_action.click(function(){action_watch()}),$("#btn-split").click(function(){split_watch()}),$("#btn-clear").click(function(){reset_watch()}),load_watch(),document.onkeydown=function(t){var a=t||window.event||arguments.callee.caller.arguments[0];a&&65==a.keyCode&&action_watch(),a&&83==a.keyCode&&split_watch(),a&&67==a.keyCode&&reset_watch()};